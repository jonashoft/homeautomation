<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
        <title>Homeautomation</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type=text/javascript>
            $(function() {
                $('a#TurnOn').bind('click', function() {
                    $.getJSON('/background_process', { state: 'On'});
                    return false;
                });
            });
            $(function() {
                $('a#TurnOff').bind('click', function() {
                    $.getJSON('/background_process', { state: 'Off'});
                    return false;
                });
            });
        </script>
        <script>
            function loadXMLDoc(){
                var req = new XMLHttpRequest()
                req.onreadystatechange = function(){
                    if (req.readyState == 4)
                    {
                        if (req.status != 200)
                        {
                            //error handling code here
                        }
                        else
                        {
                            var response = JSON.parse(req.responseText)
                            document.getElementById('myDiv').innerHTML = response.username
                        }
                    }
                }
            
                req.open('POST', '/dimm')
                req.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
                var un = document.getElementById('scname').value
                var postVars = 'username='+un
                req.send(postVars)
                
                return false
            }
        </script>
    </head>
    <body>    

        <h3>Light controls</h3>
        <div>
            <form method="post" action="/">
                <input type="submit" value="Turn on Lights" name="Turn on Lights"/>
                <input type="submit" value="Turn off Lights" name="Turn off Lights"/><br>
                <input type="submit" value="25" name="25"/>
                <input type="submit" value="50" name="50"/>
                <input type="submit" value="75" name="75"/>
                <input type="submit" value="100" name="100"/>
                <input type="text" name="DimmerValue" placeholder={{ dimm_value }}>
                <input type ="submit" value = "Dimm" name="Dimm"/>
            </form>
        </div>
        <div class='container'>
            <h3>Light controls</h3>
                <form>
                    <a href=# id=TurnOn><button>Turn On</button></a>
                    <a href=# id=TurnOff><button>Turn Off</button></a>
                    <input type="text" name="scname" id="scname">
                    <input type="button" value="Submit" onclick="return loadXMLDoc()">
                </form>
        </div>
        <div>
            <p id="response"></p>
        </div> 
    </body>
</html>